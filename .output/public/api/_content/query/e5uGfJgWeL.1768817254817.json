{"_path":"/blog/vue3-composition-api","_dir":"blog","_draft":false,"_partial":false,"_locale":"","title":"Vue 3 Composition API æ·±åº¦è§£æ","description":"æ·±å…¥ç†è§£ Vue 3 çš„ Composition APIï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨å®ƒæ¥æ„å»ºæ›´çµæ´»ã€å¯ç»´æŠ¤çš„åº”ç”¨ã€‚","date":"2026-01-16","tags":["Vue","JavaScript","æ•™ç¨‹"],"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"vue-3-composition-api-æ·±åº¦è§£æ"},"children":[{"type":"text","value":"Vue 3 Composition API æ·±åº¦è§£æ"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue 3 å¼•å…¥çš„ Composition API æ˜¯ä¸€ä¸ªé‡å¤§æ›´æ–°ï¼Œå®ƒæä¾›äº†ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥ç»„ç»‡ç»„ä»¶é€»è¾‘ã€‚"}]},{"type":"element","tag":"h2","props":{"id":"ä»€ä¹ˆæ˜¯-composition-api"},"children":[{"type":"text","value":"ä»€ä¹ˆæ˜¯ Composition APIï¼Ÿ"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Composition API æ˜¯ Vue 3 ä¸­ç”¨äºç»„ç»‡ç»„ä»¶é€»è¾‘çš„æ–°æ–¹å¼ï¼Œå®ƒè§£å†³äº† Options API åœ¨å¤§å‹ç»„ä»¶ä¸­çš„ä¸€äº›é™åˆ¶ã€‚"}]},{"type":"element","tag":"h3","props":{"id":"options-api-vs-composition-api"},"children":[{"type":"text","value":"Options API vs Composition API"}]},{"type":"element","tag":"h4","props":{"id":"options-apivue-2"},"children":[{"type":"text","value":"Options APIï¼ˆVue 2ï¼‰"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nexport default {\ndata() {\nreturn {\ncount: 0,\nmessage: 'Hello'\n}\n},\nmethods: {\nincrement() {\nthis.count++\n}\n},\ncomputed: {\ndoubleCount() {\nreturn this.count * 2\n}\n}\n}\n```"}]},{"type":"element","tag":"h4","props":{"id":"composition-apivue-3"},"children":[{"type":"text","value":"Composition APIï¼ˆVue 3ï¼‰"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { ref, computed } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"export default {\nsetup() {\nconst count = ref(0)\nconst message = ref('Hello')"}]},{"type":"element","tag":"pre","props":{"code":"const increment = () => {\n  count.value++\n}\n\nconst doubleCount = computed(() => count.value * 2)\n\nreturn {\n  count,\n  message,\n  increment,\n  doubleCount\n}\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"const increment = () => {\n  count.value++\n}\n\nconst doubleCount = computed(() => count.value * 2)\n\nreturn {\n  count,\n  message,\n  increment,\n  doubleCount\n}\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"}\n}\n```"}]},{"type":"element","tag":"h2","props":{"id":"æ ¸å¿ƒ-api"},"children":[{"type":"text","value":"æ ¸å¿ƒ API"}]},{"type":"element","tag":"h3","props":{"id":"_1-ref-å’Œ-reactive"},"children":[{"type":"text","value":"1. ref å’Œ reactive"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ref"}]},{"type":"text","value":" - ç”¨äºåŸºæœ¬ç±»å‹ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { ref } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const count = ref(0)\nconsole.log(count.value) // 0"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"count.value++\nconsole.log(count.value) // 1\n```"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"reactive"}]},{"type":"text","value":" - ç”¨äºå¯¹è±¡ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { reactive } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const state = reactive({\ncount: 0,\nmessage: 'Hello'\n})"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"state.count++ // ç›´æ¥è®¿é—®ï¼Œæ— éœ€ .value\n```"}]},{"type":"element","tag":"h3","props":{"id":"_2-computed"},"children":[{"type":"text","value":"2. computed"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"è®¡ç®—å±æ€§ä¿æŒä¸ Vue 2 ç›¸åŒçš„å“åº”å¼ç‰¹æ€§ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { ref, computed } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const count = ref(0)\nconst doubleCount = computed(() => count.value * 2)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"// å¯å†™çš„è®¡ç®—å±æ€§\nconst fullName = computed({\nget() {\nreturn firstName.value + ' ' + lastName.value\n},\nset(value) {\n"},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"firstName.value, lastName.value"}]},{"type":"text","value":" = value.split(' ')\n}\n})\n```"}]},{"type":"element","tag":"h3","props":{"id":"_3-watch-å’Œ-watcheffect"},"children":[{"type":"text","value":"3. watch å’Œ watchEffect"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"watch"}]},{"type":"text","value":" - ç›‘å¬ç‰¹å®šæ•°æ®æºï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { ref, watch } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const count = ref(0)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"watch(count, (newValue, oldValue) => {\nconsole.log(`count changed from ${oldValue} to ${newValue}`)\n})"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"// ç›‘å¬å¤šä¸ªæº\nwatch("},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"count, message"}]},{"type":"text","value":", ("},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"newCount, newMessage"}]},{"type":"text","value":", "},{"type":"element","tag":"span","props":{},"children":[{"type":"text","value":"oldCount, oldMessage"}]},{"type":"text","value":") => {\n// ...\n})\n```"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"watchEffect"}]},{"type":"text","value":" - è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { ref, watchEffect } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const count = ref(0)\nconst message = ref('Hello')"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"watchEffect(() => {\nconsole.log(`count is ${count.value}, message is ${message.value}`)\n})\n```"}]},{"type":"element","tag":"h3","props":{"id":"_4-ç”Ÿå‘½å‘¨æœŸé’©å­"},"children":[{"type":"text","value":"4. ç”Ÿå‘½å‘¨æœŸé’©å­"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\nimport { onMounted, onUpdated, onUnmounted } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"export default {\nsetup() {\nonMounted(() => {\nconsole.log('ç»„ä»¶å·²æŒ‚è½½')\n})"}]},{"type":"element","tag":"pre","props":{"code":"onUpdated(() => {\n  console.log('ç»„ä»¶å·²æ›´æ–°')\n})\n\nonUnmounted(() => {\n  console.log('ç»„ä»¶å³å°†å¸è½½')\n})\n"},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"text","value":"onUpdated(() => {\n  console.log('ç»„ä»¶å·²æ›´æ–°')\n})\n\nonUnmounted(() => {\n  console.log('ç»„ä»¶å³å°†å¸è½½')\n})\n"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"}\n}\n```"}]},{"type":"element","tag":"h2","props":{"id":"script-setup"},"children":[{"type":"text","value":"Script Setup"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Vue 3.2+ å¼•å…¥äº† "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"<script setup>"}]},{"type":"text","value":" è¯­æ³•ç³–ï¼Œè®©ä»£ç æ›´ç®€æ´ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```vue"}]},{"type":"element","tag":"script","props":{"setup":""},"children":[{"type":"text","value":"\nimport { ref, computed } from 'vue'\n\nconst count = ref(0)\nconst doubleCount = computed(() => count.value * 2)\n\nfunction increment() {\n  count.value++\n}\n"}]},{"type":"element","tag":"template","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"div","props":{},"children":[{"type":"text","value":"\n    "},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Count: {{ count }}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Double: {{ doubleCount }}"}]},{"type":"text","value":"\n    "},{"type":"element","tag":"button","props":{"@click":"increment"},"children":[{"type":"text","value":"Increment"}]},{"type":"text","value":"\n  "}]}]},{"type":"element","tag":"h2","props":{"id":"ç»„åˆå¼å‡½æ•°composables"},"children":[{"type":"text","value":"ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"åˆ›å»ºå¯å¤ç”¨çš„é€»è¾‘ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\n// composables/useMouse.js\nimport { ref, onMounted, onUnmounted } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"export function useMouse() {\nconst x = ref(0)\nconst y = ref(0)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"function update(event) {\nx.value = event.pageX\ny.value = event.pageY\n}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"onMounted(() => {\nwindow.addEventListener('mousemove', update)\n})"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"onUnmounted(() => {\nwindow.removeEventListener('mousemove', update)\n})"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"return { x, y }\n}\n```"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"ä½¿ç”¨ç»„åˆå¼å‡½æ•°ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```vue"}]},{"type":"element","tag":"script","props":{"setup":""},"children":[{"type":"text","value":"\nimport { useMouse } from './composables/useMouse'\n\nconst { x, y } = useMouse()\n"}]},{"type":"element","tag":"template","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"div","props":{},"children":[{"type":"text","value":"Mouse position: {{ x }}, {{ y }}"}]}]},{"type":"element","tag":"h2","props":{"id":"é«˜çº§æ¨¡å¼"},"children":[{"type":"text","value":"é«˜çº§æ¨¡å¼"}]},{"type":"element","tag":"h3","props":{"id":"_1-provide-inject"},"children":[{"type":"text","value":"1. Provide / Inject"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"è·¨å±‚çº§ç»„ä»¶é€šä¿¡ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```javascript\n// çˆ¶ç»„ä»¶\nimport { provide, ref } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const theme = ref('dark')\nprovide('theme', theme)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"// å­ç»„ä»¶\nimport { inject } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const theme = inject('theme')\n```"}]},{"type":"element","tag":"h3","props":{"id":"_2-æ¨¡æ¿å¼•ç”¨"},"children":[{"type":"text","value":"2. æ¨¡æ¿å¼•ç”¨"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"è®¿é—® DOM å…ƒç´ ï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```vue"}]},{"type":"element","tag":"script","props":{"setup":""},"children":[{"type":"text","value":"\nimport { ref, onMounted } from 'vue'\n\nconst inputRef = ref(null)\n\nonMounted(() => {\n  inputRef.value.focus()\n})\n"}]},{"type":"element","tag":"template","props":{},"children":[{"type":"text","value":"\n  "},{"type":"element","tag":"input","props":{"ref":"inputRef"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"_3-typescript-æ”¯æŒ"},"children":[{"type":"text","value":"3. TypeScript æ”¯æŒ"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Composition API å¯¹ TypeScript æœ‰å¾ˆå¥½çš„æ”¯æŒï¼š"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"```typescript\nimport { ref, Ref } from 'vue'"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"interface User {\nid: number\nname: string\n}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"const user: Ref<User | null> = ref(null)"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"async function fetchUser(id: number): Promise"},{"type":"element","tag":"void","props":{},"children":[{"type":"text","value":" {\nconst response = await fetch(`/api/users/${id}`)\nuser.value = await response.json()\n}\n```"}]}]},{"type":"element","tag":"h2","props":{"id":"æœ€ä½³å®è·µ"},"children":[{"type":"text","value":"æœ€ä½³å®è·µ"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"æŒ‰åŠŸèƒ½ç»„ç»‡ä»£ç "}]},{"type":"text","value":" - å°†ç›¸å…³é€»è¾‘æ”¾åœ¨ä¸€èµ·"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"æå–å¯å¤ç”¨é€»è¾‘"}]},{"type":"text","value":" - åˆ›å»ºç»„åˆå¼å‡½æ•°"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ä½¿ç”¨ TypeScript"}]},{"type":"text","value":" - è·å¾—æ›´å¥½çš„ç±»å‹æ”¯æŒ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"ä¿æŒ setup ç®€æ´"}]},{"type":"text","value":" - å¤æ‚é€»è¾‘æå–åˆ°å•ç‹¬æ–‡ä»¶"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"åˆç†ä½¿ç”¨ ref å’Œ reactive"}]},{"type":"text","value":" - åŸºæœ¬ç±»å‹ç”¨ refï¼Œå¯¹è±¡ç”¨ reactive"}]}]},{"type":"element","tag":"h2","props":{"id":"æ€»ç»“"},"children":[{"type":"text","value":"æ€»ç»“"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Composition API æä¾›äº†ï¼š"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"âœ… æ›´å¥½çš„ä»£ç ç»„ç»‡"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"âœ… æ›´å®¹æ˜“å¤ç”¨é€»è¾‘"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"âœ… æ›´å¥½çš„ TypeScript æ”¯æŒ"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"âœ… æ›´çµæ´»çš„ç»„ä»¶è®¾è®¡"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"è™½ç„¶å­¦ä¹ æ›²çº¿ç¨é™¡ï¼Œä½†æŒæ¡åä¼šå¤§å¤§æé«˜å¼€å‘æ•ˆç‡ï¼"}]},{"type":"element","tag":"h2","props":{"id":"ç›¸å…³èµ„æº"},"children":[{"type":"text","value":"ç›¸å…³èµ„æº"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://vuejs.org","rel":["nofollow"]},"children":[{"type":"text","value":"Vue 3 å®˜æ–¹æ–‡æ¡£"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://vuejs.org/guide/extras/composition-api-faq.html","rel":["nofollow"]},"children":[{"type":"text","value":"Vue 3 ç»„åˆå¼ API FAQ"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://vueuse.org","rel":["nofollow"]},"children":[{"type":"text","value":"VueUse"}]},{"type":"text","value":" - å¼ºå¤§çš„ç»„åˆå¼å‡½æ•°åº“"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Happy coding! ğŸš€"}]}],"toc":{"title":"","searchDepth":3,"depth":3,"links":[{"id":"ä»€ä¹ˆæ˜¯-composition-api","depth":2,"text":"ä»€ä¹ˆæ˜¯ Composition APIï¼Ÿ","children":[{"id":"options-api-vs-composition-api","depth":3,"text":"Options API vs Composition API","children":[{"id":"options-apivue-2","depth":4,"text":"Options APIï¼ˆVue 2ï¼‰"},{"id":"composition-apivue-3","depth":4,"text":"Composition APIï¼ˆVue 3ï¼‰"}]}]},{"id":"æ ¸å¿ƒ-api","depth":2,"text":"æ ¸å¿ƒ API","children":[{"id":"_1-ref-å’Œ-reactive","depth":3,"text":"1. ref å’Œ reactive"},{"id":"_2-computed","depth":3,"text":"2. computed"},{"id":"_3-watch-å’Œ-watcheffect","depth":3,"text":"3. watch å’Œ watchEffect"},{"id":"_4-ç”Ÿå‘½å‘¨æœŸé’©å­","depth":3,"text":"4. ç”Ÿå‘½å‘¨æœŸé’©å­"}]},{"id":"script-setup","depth":2,"text":"Script Setup"},{"id":"ç»„åˆå¼å‡½æ•°composables","depth":2,"text":"ç»„åˆå¼å‡½æ•°ï¼ˆComposablesï¼‰"},{"id":"é«˜çº§æ¨¡å¼","depth":2,"text":"é«˜çº§æ¨¡å¼","children":[{"id":"_1-provide-inject","depth":3,"text":"1. Provide / Inject"},{"id":"_2-æ¨¡æ¿å¼•ç”¨","depth":3,"text":"2. æ¨¡æ¿å¼•ç”¨"},{"id":"_3-typescript-æ”¯æŒ","depth":3,"text":"3. TypeScript æ”¯æŒ"}]},{"id":"æœ€ä½³å®è·µ","depth":2,"text":"æœ€ä½³å®è·µ"},{"id":"æ€»ç»“","depth":2,"text":"æ€»ç»“"},{"id":"ç›¸å…³èµ„æº","depth":2,"text":"ç›¸å…³èµ„æº"}]}},"_type":"markdown","_id":"content:blog:vue3-composition-api.md","_source":"content","_file":"blog/vue3-composition-api.md","_stem":"blog/vue3-composition-api","_extension":"md"}